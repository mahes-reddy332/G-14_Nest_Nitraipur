import{r as e,u as t,j as r}from"./vendor-query-3cLbHxHt.js";import{r as i}from"./index-ByULtmE-.js";import{b8 as s,u as a,h as d,q as o,O as n,aO as l,z as p,H as c,S as y,N as x}from"./vendor-antd-Ba3TCcI4.js";import"./vendor-react-CSmESBJ6.js";import"./vendor-state-hAMrnFl_.js";const{Title:j,Text:m}=o;function h(){const[o,h]=e.useState(null),{data:f=[],isLoading:g}=t({queryKey:["reports"],queryFn:i.list}),{data:u,isLoading:v}=t({queryKey:["reportDetail",o],queryFn:()=>i.getById(o),enabled:!!o}),_=[{title:"Report ID",dataIndex:"report_id",key:"report_id",render:(e,t)=>r.jsx("a",{onClick:()=>h(t.report_id),children:e})},{title:"Type",dataIndex:"report_type",key:"report_type",render:e=>r.jsx(x,{color:"html"===e?"blue":"green",children:e})},{title:"Size",dataIndex:"size_bytes",key:"size_bytes",render:e=>`${(e/1024).toFixed(1)} KB`},{title:"Last Modified",dataIndex:"last_modified",key:"last_modified"}];return r.jsxs("div",{children:[r.jsx(s,{items:[{href:"/",title:r.jsx(a,{})},{title:r.jsxs(r.Fragment,{children:[r.jsx(d,{})," Reports"]})}],style:{marginBottom:16}}),r.jsx(j,{level:2,children:"Reports"}),r.jsx(m,{type:"secondary",style:{display:"block",marginBottom:24},children:"Generated reports and dashboard artifacts"}),r.jsx(n,{style:{marginBottom:24},children:r.jsx(l,{columns:_,dataSource:f,rowKey:"report_id",loading:g,pagination:{pageSize:10}})}),r.jsxs(n,{title:"Report Viewer",children:[v&&r.jsx(p,{}),!v&&!u&&r.jsx(c,{description:"Select a report to view"}),!v&&u&&r.jsxs("div",{children:[r.jsxs(y,{direction:"vertical",size:8,style:{width:"100%"},children:[r.jsx(m,{strong:!0,children:u.name}),r.jsx(m,{type:"secondary",children:u.report_id})]}),r.jsx("div",{style:{marginTop:16},children:"html"===u.report_type?r.jsx("iframe",{title:"report-viewer",srcDoc:String(u.content),style:{width:"100%",height:600,border:"1px solid #f0f0f0"}}):r.jsx("pre",{style:{maxHeight:600,overflow:"auto",background:"#fafafa",padding:16},children:JSON.stringify(u.content,null,2)})})]})]})]})}export{h as default};
