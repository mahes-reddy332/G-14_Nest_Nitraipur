import{r as e,u as s,j as i}from"./vendor-query-3cLbHxHt.js";import{b as t}from"./index-CLsPU1EI.js";import{b2 as n,u as r,f as l,q as a,H as c,F as d,G as o,E as h,S as x,A as j,k as m,b4 as g,be as p,I as u,P as y,T as f,B as v,aN as b,O as I,aP as _,p as z,bb as S,bc as k,K as A}from"./vendor-antd-CMNZCwNL.js";import"./vendor-react-BULyYbn8.js";import"./vendor-state-hAMrnFl_.js";const{Title:q,Text:w,Paragraph:F}=a,{Panel:K}=p,E={critical:"red",high:"orange",medium:"gold",low:"green"},M={reconciliation:"#1890ff",coding:"#722ed1",data_quality:"#13c2c2",predictive:"#eb2f96",site_liaison:"#52c41a",supervisor:"#fa8c16"},T={active:"success",idle:"warning",error:"error"};function B(){var a,B,C;const[P,L]=e.useState(null),[O,R]=e.useState(!1),{data:D,isLoading:G}=s({queryKey:["agentStatus"],queryFn:t.getStatus}),{data:H=[],isLoading:N}=s({queryKey:["agentInsights"],queryFn:()=>t.getInsights({limit:50})}),{data:$=[],isLoading:J}=s({queryKey:["agentRecommendations"],queryFn:()=>t.getRecommendations({limit:20})}),{data:Q}=s({queryKey:["explainability",null==P?void 0:P.insight_id],queryFn:()=>t.getExplainability(P.insight_id),enabled:!!P&&O}),U=D?Object.entries(D):[],V=U.filter(([e,s])=>"active"===s.status).length,W=H.reduce((e,s)=>(e[s.agent]||(e[s.agent]=[]),e[s.agent].push(s),e),{});return i.jsxs("div",{children:[i.jsx(n,{items:[{href:"/",title:i.jsx(r,{})},{title:i.jsxs(i.Fragment,{children:[i.jsx(l,{})," AI Agents"]})}],style:{marginBottom:16}}),i.jsx(q,{level:2,children:"AI Agents"}),i.jsx(w,{type:"secondary",style:{display:"block",marginBottom:24},children:"Monitor AI agent status, insights, and recommendations"}),i.jsxs("div",{style:{marginBottom:24},children:[i.jsxs(q,{level:4,children:["Agent Status"," ",i.jsxs(c,{color:"blue",children:[V,"/",U.length," Active"]})]}),i.jsx(d,{gutter:[16,16],children:U.map(([e,s])=>i.jsx(o,{xs:24,sm:12,md:8,lg:4,children:i.jsx(h,{size:"small",hoverable:!0,children:i.jsxs(x,{direction:"vertical",size:"small",style:{width:"100%"},children:[i.jsxs(x,{children:[i.jsx(j,{style:{backgroundColor:M[e]||"#8c8c8c"},icon:i.jsx(l,{})}),i.jsxs("div",{children:[i.jsx(w,{strong:!0,style:{display:"block",fontSize:12},children:s.name}),i.jsx(m,{status:T[s.status],text:i.jsx(w,{type:"secondary",style:{fontSize:11},children:s.status})})]})]}),i.jsxs("div",{style:{fontSize:11,color:"#8c8c8c"},children:[s.tasks_completed," completed â€¢ ",s.tasks_pending," pending"]})]})})},e))})]}),i.jsx(h,{children:i.jsx(g,{defaultActiveKey:"insights",items:[{key:"insights",label:i.jsxs("span",{children:[i.jsx(I,{})," Insights (",H.length,")"]}),children:i.jsx(p,{accordion:!0,children:Object.entries(W).map(([e,s])=>{var t;return i.jsx(K,{header:i.jsxs(x,{children:[i.jsx(j,{size:"small",style:{backgroundColor:M[e]||"#8c8c8c"},icon:i.jsx(l,{})}),i.jsx(w,{strong:!0,children:(null==(t=null==D?void 0:D[e])?void 0:t.name)||e}),i.jsxs(c,{children:[s.length," insights"]})]}),children:i.jsx(u,{dataSource:s,renderItem:e=>i.jsx(u.Item,{actions:[i.jsx(f,{title:"Explain this insight",children:i.jsx(v,{type:"link",icon:i.jsx(b,{}),onClick:()=>(e=>{L(e),R(!0)})(e),children:"Explain"})},"explain")],children:i.jsx(u.Item.Meta,{avatar:i.jsx(c,{color:E[e.priority],children:e.priority}),title:e.title,description:i.jsxs(i.Fragment,{children:[i.jsx(F,{ellipsis:{rows:2},style:{marginBottom:8},children:e.description}),i.jsxs(x,{wrap:!0,size:"small",children:[i.jsx(y,{percent:Math.round(100*e.confidence),size:"small",style:{width:80},format:e=>`${e}%`}),i.jsx(w,{type:"secondary",style:{fontSize:12},children:"Confidence"}),e.affected_entities&&i.jsxs(c,{color:"blue",children:[e.affected_entities.count," ",e.affected_entities.type]})]})]})})})})},e)})})},{key:"recommendations",label:i.jsxs("span",{children:[i.jsx(z,{})," Recommendations (",$.length,")"]}),children:i.jsx(u,{loading:J,dataSource:$,renderItem:e=>i.jsx(u.Item,{children:i.jsx(u.Item.Meta,{avatar:i.jsx("div",{style:{textAlign:"center"},children:i.jsx(y,{type:"circle",percent:e.priority_score,size:50,format:e=>e})}),title:i.jsxs(x,{children:[i.jsx(w,{strong:!0,children:e.title}),i.jsxs(c,{color:"high"===e.impact?"red":"medium"===e.impact?"orange":"green",children:[e.impact," impact"]}),i.jsxs(c,{color:"high"===e.effort?"red":"medium"===e.effort?"orange":"green",children:[e.effort," effort"]})]}),description:i.jsxs(i.Fragment,{children:[i.jsx(F,{children:e.description}),i.jsxs("div",{style:{marginTop:8},children:[i.jsx(w,{strong:!0,children:"Action Items:"}),i.jsx("ul",{style:{marginTop:4,paddingLeft:20},children:e.action_items.map((e,s)=>i.jsx("li",{children:i.jsx(w,{type:"secondary",children:e})},s))})]}),i.jsxs(x,{style:{marginTop:8},children:[i.jsx(_,{}),i.jsxs(w,{type:"secondary",children:["Est. time: ",e.estimated_completion_time]}),i.jsx(c,{color:"blue",children:e.source_agent})]})]})})})})}]})}),i.jsx(S,{title:i.jsxs(x,{children:[i.jsx(A,{}),"Insight Explanation"]}),open:O,onCancel:()=>R(!1),footer:null,width:700,children:P&&i.jsxs(x,{direction:"vertical",size:"large",style:{width:"100%"},children:[i.jsxs(h,{size:"small",title:"Insight",children:[i.jsx(w,{strong:!0,children:P.title}),i.jsx(F,{type:"secondary",children:P.description})]}),Q&&i.jsxs(i.Fragment,{children:[i.jsx(h,{size:"small",title:"Decision Path",children:i.jsx(k,{children:null==(a=Q.decision_path)?void 0:a.map(e=>i.jsxs(k.Item,{children:[i.jsxs(w,{strong:!0,children:["Step ",e.step,":"]})," ",e.description]},e.step))})}),i.jsx(h,{size:"small",title:"Key Factors",children:i.jsx(u,{size:"small",dataSource:Q.key_factors||[],renderItem:e=>i.jsx(u.Item,{children:i.jsx(u.Item.Meta,{title:i.jsxs(x,{children:[i.jsx(w,{children:e.factor}),i.jsx(y,{percent:Math.round(100*e.contribution),size:"small",style:{width:100}})]}),description:e.description})})})}),i.jsx(h,{size:"small",title:"Data Sources & Algorithms",children:i.jsxs(x,{wrap:!0,children:[null==(B=Q.data_sources)?void 0:B.map(e=>i.jsx(c,{color:"blue",children:e},e)),null==(C=Q.algorithms_used)?void 0:C.map(e=>i.jsx(c,{color:"purple",children:e},e))]})})]})]})})]})}export{B as default};
